<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
		 xmlns:s="library://ns.adobe.com/flex/spark" 
		 xmlns:mx="library://ns.adobe.com/flex/mx" width="100" height="100"
		 click="group1_clickHandler(event)">
	
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>
	
	<fx:Metadata>
		[Event(name="CharacterIsSelected", type="flash.events.Event")]
	</fx:Metadata>

	
	<fx:Script>
		<![CDATA[
			import character.Character;
			
			import mx.controls.Alert;
			
			[Bindable]
			public var char:Character;
			
			public var index_in_partyview:int;
			public var isSelected:Boolean = false;
			
			protected function group1_clickHandler(event:MouseEvent):void
			{
				//var eventObject:Event = new Event("CharacterIsSelected",true);
				var eventObject:CharacterSelectedEvent = new CharacterSelectedEvent("CharacterIsSelected",true,false,this.char,this.index_in_partyview);				
				
				this.dispatchEvent(eventObject);
			}
			
			public function updateStatusBar():void{
				var tmpHealth:int;
				tmpHealth = ((char.health.value as int)*40)/(char.health.max_value as int);
				this.healthStatusBar.setProgress(tmpHealth,40);
				
				var tmpSpirae:int;
				tmpSpirae = ((char.spirae.value as int)*40)/(char.spirae.max_value as int);
				this.spiraeStatusBar.setProgress(tmpSpirae,40);
			}
			
		]]>
	</fx:Script>
	
	<s:layout>
		<s:VerticalLayout horizontalAlign="center"
						  gap="2"/>
	</s:layout>

	<s:Group id="character_appearance_container"
			 width="100%" height="100%">
		<s:layout>
			<s:BasicLayout/>
		</s:layout>

	    <s:BitmapImage source="{char.appearance_basebody}"
					   width="100" height="100"
				   horizontalAlign="center"/>	
		<s:BitmapImage source="{char.appearance_basehead}"
					   width="100" height="100"
					   horizontalAlign="center"/>	
		<s:BitmapImage source="{char.appearance_torso}"
					   width="100" height="100"
					   horizontalAlign="center"/>	
		<s:BitmapImage source="{char.appearance_head}"
					   width="100" height="100"
					   horizontalAlign="center"/>	
		<s:BitmapImage source="{char.appearance_legs}"
					   width="100" height="100"
					   horizontalAlign="center"/>	
		<s:BitmapImage source="{char.appearance_feet}"
					   width="100" height="100"
					   horizontalAlign="center"/>	
		<s:BitmapImage source="{char.appearance_shoulders}"
					   width="100" height="100"
					   horizontalAlign="center"/>	
		<s:BitmapImage source="{char.appearance_hands}"
					   width="100" height="100"
					   horizontalAlign="center"/>	
		<s:BitmapImage source="{char.appearance_weapon}"
					   width="100" height="100"
					   horizontalAlign="center"/>
		<s:BitmapImage source="{char.appearance_offhand}"
					   width="100" height="100"
					   horizontalAlign="center"/>	

	</s:Group>

<!--	<s:HGroup width="100%">			
		<s:Label text="Health "/>
		<s:Label text="{char.health.value}"/>
	</s:HGroup>
	
	<s:HGroup width="100%">			
		<s:Label text="Level "/>
		<s:Label text="{char.level.value}"/>
	</s:HGroup>	
-->	
	

	<s:HGroup>
		<s:Label text="H" fontSize="8"/>
		<mx:ProgressBar id="healthStatusBar"
						mode="manual"
						minimum="0"
						maximum="100" 
						label=""
						width="50"
						height="8"/>
	</s:HGroup>

	<s:HGroup>
		<s:Label text="S" fontSize="8"/>
		<mx:ProgressBar id="spiraeStatusBar"
						mode="manual"
						minimum="0"
						maximum="100" 
						label=""
						width="50"
						height="8"/>
	</s:HGroup>

</s:Group>


